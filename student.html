<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>利用報告ポータル | 生成AI利用ガイドライン</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
    body { font-family: 'Noto Sans JP', sans-serif; background: #fdfdfd; color: #1a1a1a; line-height: 1.8; }
    .answered { pointer-events: none; }
    .quiz-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  </style>
</head>
<body class="min-h-screen pb-32">

  <nav class="p-6 border-b border-gray-100 bg-white/90 backdrop-blur-md sticky top-0 z-50">
    <div class="max-w-2xl mx-auto flex justify-between items-center">
      <a href="index.html" class="font-black text-blue-600 flex items-center gap-2 hover:opacity-70 transition-opacity">
        <i data-lucide="arrow-left" size="18"></i> ガイドラインに戻る
      </a>
      <span class="text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] bg-slate-50 px-4 py-1.5 rounded-full border border-gray-100">Portal</span>
    </div>
  </nav>

  <main class="max-w-2xl mx-auto px-6 py-16">
    <header class="text-center mb-20">
      <h1 class="text-4xl font-black mb-8 tracking-tight">理解度チェック</h1>
      <p class="text-gray-500 text-lg font-medium leading-loose">
        報告フォームに進む前に、ガイドラインの要点を再確認しましょう。<br>
        3問中2問以上の正解で、報告用のリンクが有効になります。
      </p>
    </header>

    <div id="quiz-stack" class="space-y-8"></div>

    <section id="retry-area" class="mt-16 text-center hidden">
      <p class="text-red-500 font-bold mb-6 italic">もう一度ルールを確認して再挑戦しましょう</p>
      <button onclick="initQuiz()" class="px-10 py-5 bg-slate-900 text-white rounded-full font-bold text-sm flex items-center gap-3 mx-auto shadow-2xl hover:bg-blue-600 transition-all">
        <i data-lucide="refresh-cw" size="18"></i> クイズをやり直す
      </button>
    </section>

    <section id="score-status" class="mt-16 p-10 bg-white border border-gray-100 rounded-[2rem] shadow-sm text-center">
      <div id="status-badge" class="inline-block px-6 py-2 bg-red-100 text-red-600 text-xs font-black rounded-full mb-8 uppercase tracking-widest">Locked</div>
      <div class="flex justify-center items-baseline gap-3">
        <span id="score-val" class="text-6xl font-black tracking-tighter">0</span>
        <span class="text-gray-300 font-bold text-xl">/ 2 正解で解除</span>
      </div>
    </section>

    <section id="form-unlock-area" class="mt-20 opacity-30 grayscale pointer-events-none transition-all duration-1000">
      <div class="bg-slate-900 text-white p-12 md:p-16 rounded-[3rem] text-center shadow-2xl">
        <div class="w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-10 shadow-lg shadow-blue-600/40">
          <i data-lucide="external-link" size="36"></i>
        </div>
        <h2 class="text-3xl font-black mb-6 tracking-tight">報告フォームへ</h2>
        <p class="text-slate-400 text-base mb-12 leading-loose">
          理解度チェックをクリアしました。<br>
          以下のリンクから、作品制作でのAI活用状況を報告してください。
        </p>
        
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSemcECAgiQRrN2u7wyMktHhJIyaH_XZsmoiHkCreGXR-KmcrQ/viewform?usp=header" 
           target="_blank" 
           class="block w-full py-6 bg-blue-600 rounded-2xl font-black text-2xl shadow-xl hover:bg-blue-500 hover:scale-[1.02] active:scale-95 transition-all">
          Googleフォームを開く
        </a>
      </div>
    </section>
  </main>

  <script>
    const db = [
      { q: "Level 0の授業で、こっそりAIを使うのはOK？", a: ["ダメ。基礎を学ぶため一切禁止", "少しならバレないのでOK", "AIに聞くのはOK"], c: 0 },
      { q: "AIが作った絵をそのまま自分の作品として出せるレベルは？", a: ["Level 2", "Level 3", "どのレベルも原則不可（加工が必要）"], c: 2 },
      { q: "特定の作家さんの絵をそっくりに真似る指示（プロンプト）は？", a: ["推奨される", "倫理的に避けるべき", "積極的に練習すべき"], c: 1 },
      { q: "AIを利用した時、学校への報告は必要？", a: ["必ず必要", "自信があるなら不要", "気が向いたらでいい"], c: 0 },
      { q: "AIが間違った情報を出した時、責任を負うのは？", a: ["AIを作った会社", "自分自身", "教えてくれた先生"], c: 1 }
    ];

    let score = 0;
    let count = 0;

    function initQuiz() {
      score = 0; count = 0;
      document.getElementById('score-val').innerText = "0";
      document.getElementById('retry-area').classList.add('hidden');
      document.getElementById('status-badge').innerText = "Locked";
      document.getElementById('status-badge').className = "inline-block px-6 py-2 bg-red-100 text-red-600 text-xs font-black rounded-full mb-8 uppercase tracking-widest";
      document.getElementById('form-unlock-area').classList.add('opacity-30', 'grayscale', 'pointer-events-none');
      
      const stack = document.getElementById('quiz-stack');
      stack.innerHTML = '';
      const selected = db.sort(() => 0.5 - Math.random()).slice(0, 3);
      
      selected.forEach((item, i) => {
        const art = document.createElement('article');
        art.className = "quiz-card bg-white p-10 border border-gray-100 rounded-3xl shadow-sm";
        art.innerHTML = `<h3 class="text-xl font-black mb-8 flex gap-4"><span class="text-blue-600">Q${i+1}.</span><span>${item.q}</span></h3><div class="grid gap-4">` + 
          item.a.map((choice, idx) => `<button onclick="handle(this, ${idx}, ${item.c})" class="text-left p-5 border-2 border-slate-50 rounded-2xl text-base font-bold hover:bg-blue-50 hover:border-blue-200 transition-all shadow-sm">${choice}</button>`).join('') + `</div>`;
        stack.appendChild(art);
      });
    }

    function handle(btn, idx, correct) {
      const parent = btn.parentElement;
      if(parent.classList.contains('answered')) return;
      parent.classList.add('answered');
      count++;
      if(idx === correct) {
        btn.classList.add('bg-green-50', 'border-green-500', 'text-green-700');
        score++;
      } else {
        btn.classList.add('bg-red-50', 'border-red-500', 'text-red-700');
      }
      document.getElementById('score-val').innerText = score;
      if(score >= 2) {
        document.getElementById('form-unlock-area').classList.remove('opacity-30', 'grayscale', 'pointer-events-none');
        document.getElementById('status-badge').innerText = "Unlocked";
        document.getElementById('status-badge').className = "inline-block px-6 py-2 bg-green-500 text-white text-xs font-black rounded-full mb-8 uppercase tracking-widest";
      }
      if(count === 3 && score < 2) document.getElementById('retry-area').classList.remove('hidden');
    }

    window.onload = initQuiz;
    lucide.createIcons();
  </script>
</body>
</html>