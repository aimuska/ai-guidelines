<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>利用報告ポータル | 生成AI利用ガイドライン</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
    body { font-family: 'Noto Sans JP', sans-serif; background: #fdfdfd; color: #1a1a1a; }
    .answered { pointer-events: none; }
  </style>
</head>
<body class="min-h-screen pb-24">

  <nav class="p-6 border-b border-gray-100 bg-white/80 backdrop-blur-md sticky top-0 z-50">
    <div class="max-w-2xl mx-auto flex justify-between items-center">
      <a href="index.html" class="font-black text-blue-600 flex items-center gap-2">
        <i data-lucide="arrow-left" size="16"></i> ガイドラインに戻る
      </a>
      <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest bg-gray-50 px-3 py-1 rounded-full border border-gray-100">Portal</span>
    </div>
  </nav>

  <main class="max-w-2xl mx-auto px-6 py-12">
    <header class="text-center mb-16">
      <h1 class="text-3xl font-black mb-4 tracking-tight">理解度チェック</h1>
      <p class="text-slate-500 text-sm font-medium">
        報告フォームに進む前に、ルールを再確認しましょう。<br>
        3問中2問以上の正解でフォームが開きます。
      </p>
    </header>

    <div id="quiz-stack" class="space-y-6"></div>

    <section id="retry-area" class="mt-12 text-center hidden">
      <button onclick="initQuiz()" class="px-8 py-4 bg-slate-900 text-white rounded-full font-bold text-xs flex items-center gap-2 mx-auto shadow-xl">
        <i data-lucide="refresh-cw" size="14"></i> もう一度挑戦する
      </button>
    </section>

    <section id="score-board" class="mt-12 p-8 bg-white border border-gray-100 rounded-3xl shadow-sm text-center">
      <div id="status-badge" class="inline-block px-5 py-1.5 bg-red-100 text-red-600 text-[10px] font-black rounded-full mb-6 uppercase tracking-widest">Locked</div>
      <div class="flex justify-center items-baseline gap-2">
        <span id="score-val" class="text-5xl font-black">0</span>
        <span class="text-gray-300 font-bold text-lg">/ 2 正解で解除</span>
      </div>
    </section>

    <section id="form-unlock-area" class="mt-16 opacity-30 grayscale pointer-events-none transition-all duration-700">
      <div class="bg-slate-900 text-white p-10 md:p-14 rounded-[2.5rem] text-center shadow-2xl">
        <h2 class="text-2xl font-black mb-6">報告フォームを開く</h2>
        <p class="text-slate-400 text-sm mb-10 leading-relaxed">ルールを確認しました。以下のリンクからGoogleフォームに移動し、報告を完了してください。</p>
        
        <a href="https://forms.gle/XXXXX_YOUR_FORM_ID_XXXXX" target="_blank" class="block w-full py-5 bg-blue-600 rounded-2xl font-black text-xl shadow-xl hover:bg-blue-500 transition-all">
          Googleフォームへ進む
        </a>
      </div>
    </section>
  </main>

  <script>
    const db = [
      { q: "Level 0の授業で、こっそりAIを使うのはOK？", a: ["ダメ。基礎を学ぶため一切禁止", "少しならバレないのでOK", "AIに聞くのはOK"], c: 0 },
      { q: "AIが作った絵をそのまま自分の作品として出せるレベルは？", a: ["Level 2", "Level 3", "どのレベルも原則不可（加工が必要）"], c: 2 },
      { q: "特定の作家さんの絵をそっくりに真似る指示（プロンプト）は？", a: ["推奨される", "倫理的に避けるべき", "積極的に練習すべき"], c: 1 },
      { q: "AIを利用した時、学校への報告は必要？", a: ["必ず必要", "自信があるなら不要", "気が向いたらでいい"], c: 0 },
      { q: "AIが間違った情報を出した時、責任を負うのは？", a: ["AIを作った会社", "自分自身", "教えてくれた先生"], c: 1 }
    ];

    let score = 0;
    let count = 0;

    function initQuiz() {
      score = 0; count = 0;
      document.getElementById('score-val').innerText = "0";
      document.getElementById('retry-area').classList.add('hidden');
      document.getElementById('status-badge').innerText = "Locked";
      document.getElementById('status-badge').className = "inline-block px-5 py-1.5 bg-red-100 text-red-600 text-[10px] font-black rounded-full mb-6 uppercase tracking-widest";
      document.getElementById('form-unlock-area').classList.add('opacity-30', 'grayscale', 'pointer-events-none');
      
      const stack = document.getElementById('quiz-stack');
      stack.innerHTML = '';
      const selected = db.sort(() => 0.5 - Math.random()).slice(0, 3);
      
      selected.forEach((item, i) => {
        const art = document.createElement('article');
        art.className = "bg-white p-8 border border-gray-100 rounded-2xl shadow-sm";
        art.innerHTML = `<h3 class="font-black mb-6">Q${i+1}. ${item.q}</h3><div class="grid gap-3">` + 
          item.a.map((choice, idx) => `<button onclick="handle(this, ${idx}, ${item.c})" class="text-left p-4 border-2 border-gray-50 rounded-xl text-sm font-bold hover:bg-blue-50 transition-all">${choice}</button>`).join('') + `</div>`;
        stack.appendChild(art);
      });
    }

    function handle(btn, idx, correct) {
      const parent = btn.parentElement;
      if(parent.classList.contains('answered')) return;
      parent.classList.add('answered');
      count++;
      if(idx === correct) {
        btn.classList.add('bg-green-50', 'border-green-500', 'text-green-700');
        score++;
      } else {
        btn.classList.add('bg-red-50', 'border-red-500', 'text-red-700');
      }
      document.getElementById('score-val').innerText = score;
      if(score >= 2) {
        document.getElementById('form-unlock-area').classList.remove('opacity-30', 'grayscale', 'pointer-events-none');
        document.getElementById('status-badge').innerText = "Unlocked";
        document.getElementById('status-badge').className = "inline-block px-5 py-1.5 bg-green-500 text-white text-[10px] font-black rounded-full mb-6 uppercase tracking-widest";
      }
      if(count === 3 && score < 2) document.getElementById('retry-area').classList.remove('hidden');
    }

    window.onload = initQuiz;
    lucide.createIcons();
  </script>
</body>
</html>